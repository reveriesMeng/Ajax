# Ajax
ajax学习以及跨域的学习<br/>
<br/>
## CORS
cors文件夹里写了后台nodejs如何跨域调用的方法。<br/>
允许所有跨域以及允许指定的跨域。<br/>
<br/>
## Jsonp
Jsonp是一种前端解决跨域请求的方法，利用了script、image等标签所具有的src属性可以跨域访问的特性。具体做法是在头部增加一个script标签来引入跨域访问的地址，通过跨域得到数据进行处理。<br/>
<br/>
这里利用了jsonp请求数据调用了百度地图和nowapi的接口，百度地图的接口是用来获取当前所在城市，为了展示默认的显示值；nowapi接口则是为了获取当前城市的各种天气的信息状况。根据接口协议，为每一种天气做注释以及贴图反馈带哦页面上即可。<br/>
<br/>
## chat
利用ajax调用了图灵机器人的接口，实现了聊天机器人的功能。这里由于图灵机器人的接口做了cors处理，我们不可以用jsonp的方法来请求接口了，而是需要通过ajax调用，获取到数据后渲染到页面上即可。<br/>
<br/>
## login
login文件夹里面写了一个前端ajax请求，后端nodejs进行处理的登陆模拟代码。由于模拟，我就没有使用数据库，二十用一个变量user存储用户信息，当然，服务重启数据就没了。<br/>
由于注册和登陆涉及到密码的隐私，所以不能用get请求，get请求会将信息暴露在浏览器地址栏中，所以我采用了post请求。<br/>
后端解析数据后要向前端发送信息，这个信息相当于协议，告诉前端成功与否，以及原因，我这里定义为：{"ok":true/false, "message":""},将这种形式的json发送给前端，前端再进行判断继而渲染前端页面。ok表示是否成功，message表示成功与否的原因。<br/>
<br/>
## myAjax
这个文件夹里我封装了一个ajax请求文件，在不适用jquery的情况下可以很方便的调用ajax，只需向里面传递一下参数即可。具体请求方式如下所示<br/>
``` js
    myAjax({
        url: "./TestXHR.aspx",              //请求地址
        type: "POST",                       //请求方式
        data: { name: "super", age: 20 },        //请求参数
        success: function (response) {
            // 此处放成功后执行的代码
        },
        error: function (status) {
            // 此处放失败后执行的代码
        }
    });
```
<br/>


